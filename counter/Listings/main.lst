C51 COMPILER V9.60.0.0   MAIN                                                              10/06/2020 00:35:06 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: B:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include<regx51.h>
   2          #include"stdio.h"
   3          #include"string.h"
   4          #include "stdlib.h"
   5          sbit LCD_RW = P1^5;
   6          sbit LCD_RS = P1^4;
   7          sbit LCD_EN = P1^6;
   8          #define LCD_DATA P2
   9          char counter[10];
  10          int count, Low_Byte,High_Byte;
  11          void delay(unsigned int t)
  12          {
  13   1        unsigned int i;
  14   1        while(t--){
  15   2          for(i = 0;i < 80;i++)
  16   2          {
  17   3            
  18   3          }
  19   2          
  20   2        }
  21   1        
  22   1      }
  23          void Lcd_cmd(unsigned char cmd) // Ham gui lenh ra LCD
  24          {
  25   1        LCD_RW = 0; // Chon che do ghi
  26   1        LCD_RS = 0; // Chon che do ghi lenh
  27   1        LCD_DATA = cmd; // Noi dung gui
  28   1        LCD_EN = 0;
  29   1        LCD_EN = 1;
  30   1        if(cmd <= 0x02)
  31   1        {
  32   2          delay(20);
  33   2        }
  34   1        else{
  35   2          delay(20);
  36   2        }
  37   1        
  38   1      }
  39          void Lcd_Char_Cp(char c)//HÃ m hiá»ƒn thá»‹ 1 kÃ­ tá»± táº¡i vá»‹ trÃ­ con trá»
  40          {
  41   1         LCD_RW =0;
  42   1         LCD_RS =1; //Chá»n cháº¿ Ä‘á»™ gá»­i dá»¯ liá»‡u
  43   1         LCD_DATA =c;  //KÃ­ tá»± cáº§n gá»­i ra mÃ n hÃ¬nh
  44   1         LCD_EN = 0;
  45   1         LCD_EN =1;
  46   1         delay(1);
  47   1      
  48   1      }
  49          void Lcd_Out_Cp(char *str)// HÃ m gá»­i chuá»—i kÃ­ tá»± táº¡i vá»‹ trÃ­ con trá»
  50          {
  51   1      
  52   1      unsigned char i=0;
  53   1      while(str[i]!=0)  //Gá»­i tá»«ng kÃ­ tá»± cá»§a chuá»—i Ä‘áº¿n khi gáº·p kÃ­ tá»± null
  54   1      {
C51 COMPILER V9.60.0.0   MAIN                                                              10/06/2020 00:35:06 PAGE 2   

  55   2         Lcd_Char_Cp(str[i]);
  56   2         i++;
  57   2      }
  58   1      
  59   1      }
  60          
  61          
  62          void Lcd_Out(unsigned char row, unsigned char col, char *str)   //HÃ m Di chuyá»ƒn vá»‹ trÃ­ con trá» Ä‘áº
             -¿n vá»‹ trÃ­ báº¥t kÃ¬ vÃ  in chuá»—i ra mÃ n hÃ¬nh
  63          {
  64   1        unsigned char cmd;
  65   1      
  66   1        // Di chuyá»ƒn con trá» Ä‘áº¿n vá»‹ trÃ­ cáº§n thiáº¿t
  67   1        cmd = (row==1?0x80:0xC0) + col - 1;
  68   1        Lcd_cmd(cmd);
  69   1        Lcd_Out_Cp(str);
  70   1      
  71   1      }
  72          
  73          
  74          void Lcd_Init() //HÃ m khá»Ÿi táº¡o LCD
  75          {
  76   1      
  77   1       Lcd_cmd(0x30);
  78   1       delay(5);
  79   1       Lcd_cmd(0x30);
  80   1       delay(1);
  81   1       Lcd_cmd(0x30);
  82   1       Lcd_cmd(0x38);   // Sá»‘ dÃ²ng hiá»ƒn thá»‹ lÃ  2, cá»¡ chá»¯ 5x8
  83   1       Lcd_cmd(0x01);   // xÃ³a mÃ n hÃ¬nh
  84   1       Lcd_cmd(0x0C);   //Báº­t hiá»ƒn thá»‹ vÃ  táº¯t con trá» cÃ¡c báº¡n cÃ³ thá»ƒ dÃ¹ng lá»‡nh 0xE0 Ä‘á»ƒ bá
             -º­t hiá»ƒn thá»‹ vÃ  báº­t con trá»
  85   1      }
  86          
  87          
  88          main()
  89          {
  90   1        
  91   1        TMOD=0x60;  //0x60=0110 0000 : C/T=1, bá»™ Ä‘áº¿m 1, cháº¿ Ä‘á»™ 2 tá»± náº¡p
  92   1        TH1=0x00;   //xÃ³a bá»™ Ä‘áº¿m ban Ä‘áº§u
  93   1        P3_5=1;     //set chÃ¢n vÃ o cho bá»™ Ä‘áº¿m
  94   1        TR1=1;      //khá»Ÿi Ä‘á»™ng bá»™ Ä‘áº¿m 1
  95   1        Lcd_Init();
  96   1        Lcd_Out(1,1,"COUNTER IN 8051")  ;   //In dÃ²ng "Dien Tu 3M" ra hÃ ng 1 vÃ  cá»™t 4 trÃªn mÃ n hÃ¬nh
  97   1        Lcd_Out(2,1,"Count=") ;  //In dÃ²ng "Chotroihn.vn" ra hÃ ng 2 vÃ  cá»™t 3 trÃªn mÃ n hÃ¬nh
  98   1        while(1)
  99   1        {
 100   2          Low_Byte = TL1;
 101   2          High_Byte = TH1;
 102   2          count = (High_Byte*256) + Low_Byte;
 103   2          sprintf(counter,"%d",count);
 104   2          Lcd_Out(2,8,counter);
 105   2        }
 106   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    289    ----
   CONSTANT SIZE    =     26    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     16       7
C51 COMPILER V9.60.0.0   MAIN                                                              10/06/2020 00:35:06 PAGE 3   

   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
